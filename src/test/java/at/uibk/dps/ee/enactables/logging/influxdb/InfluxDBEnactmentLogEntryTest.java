package at.uibk.dps.ee.enactables.logging.influxdb;

import at.uibk.dps.ee.enactables.logging.EnactmentLogEntry;
import org.junit.Test;

import java.time.Instant;

import static org.junit.Assert.*;

public class InfluxDBEnactmentLogEntryTest {
  @Test public void test() {
    String id = "id1";
    String type = "type1";
    double executionTime = 110.1;
    Instant timestamp = Instant.now();

    EnactmentLogEntry enactmentLogEntry1 = new EnactmentLogEntry(id, type, executionTime);
    assertFalse(enactmentLogEntry1 instanceof InfluxDBEnactmentLogEntry);

    EnactmentLogEntry enactmentLogEntry2 = new InfluxDBEnactmentLogEntry(enactmentLogEntry1);
    assertTrue(enactmentLogEntry2 instanceof InfluxDBEnactmentLogEntry);

    InfluxDBEnactmentLogEntry enactmentLogEntry3 =
        new InfluxDBEnactmentLogEntry(timestamp, id, type, 10.8, true, 0.8);

    assertNotEquals(enactmentLogEntry2, enactmentLogEntry3);

    enactmentLogEntry2.setTimestamp(timestamp);
    assertEquals(enactmentLogEntry2, enactmentLogEntry3);
  }
}
